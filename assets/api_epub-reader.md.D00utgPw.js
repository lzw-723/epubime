import{_ as s,c as a,o as e,ah as l}from"./chunks/framework.BEBVyHNm.js";const c=JSON.parse('{"title":"EpubReader","description":"","frontmatter":{},"headers":[],"relativePath":"api/epub-reader.md","filePath":"api/epub-reader.md"}'),t={name:"api/epub-reader.md"};function n(p,i,r,h,o,d){return e(),a("div",null,[...i[0]||(i[0]=[l(`<h1 id="epubreader" tabindex="-1">EpubReader <a class="header-anchor" href="#epubreader" aria-label="Permalink to “EpubReader”">​</a></h1><p><code>EpubReader</code> 是 EPUBime 库的现代 Fluent API 入口点，提供了一种链式调用的方式来配置和解析 EPUB 文件。</p><h2 id="类定义" tabindex="-1">类定义 <a class="header-anchor" href="#类定义" aria-label="Permalink to “类定义”">​</a></h2><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EpubReader</span></span></code></pre></div><h2 id="构造方法" tabindex="-1">构造方法 <a class="header-anchor" href="#构造方法" aria-label="Permalink to “构造方法”">​</a></h2><p>该类不能直接实例化，需要使用静态工厂方法。</p><h2 id="静态方法" tabindex="-1">静态方法 <a class="header-anchor" href="#静态方法" aria-label="Permalink to “静态方法”">​</a></h2><h3 id="fromfile-file-epubfile" tabindex="-1">fromFile(File epubFile) <a class="header-anchor" href="#fromfile-file-epubfile" aria-label="Permalink to “fromFile(File epubFile)”">​</a></h3><p>创建一个使用默认配置的 EpubReader 实例。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: 要解析的 EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>EpubReader</code>: 新的 EpubReader 实例</li></ul><p><strong>异常:</strong></p><ul><li><code>IllegalArgumentException</code>: 如果 epubFile 为 null</li></ul><h3 id="fromfile-string-filepath" tabindex="-1">fromFile(String filePath) <a class="header-anchor" href="#fromfile-string-filepath" aria-label="Permalink to “fromFile(String filePath)”">​</a></h3><p>从文件路径创建一个使用默认配置的 EpubReader 实例。</p><p><strong>参数:</strong></p><ul><li><code>filePath</code>: EPUB 文件的路径</li></ul><p><strong>返回值:</strong></p><ul><li><code>EpubReader</code>: 新的 EpubReader 实例</li></ul><p><strong>异常:</strong></p><ul><li><code>IllegalArgumentException</code>: 如果 filePath 为 null</li></ul><h3 id="fromfile-file-epubfile-epubreaderconfig-config" tabindex="-1">fromFile(File epubFile, EpubReaderConfig config) <a class="header-anchor" href="#fromfile-file-epubfile-epubreaderconfig-config" aria-label="Permalink to “fromFile(File epubFile, EpubReaderConfig config)”">​</a></h3><p>创建一个使用自定义配置的 EpubReader 实例。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: 要解析的 EPUB 文件</li><li><code>config</code>: 配置对象</li></ul><p><strong>返回值:</strong></p><ul><li><code>EpubReader</code>: 新的 EpubReader 实例</li></ul><p><strong>异常:</strong></p><ul><li><code>IllegalArgumentException</code>: 如果 epubFile 或 config 为 null</li></ul><h2 id="实例方法" tabindex="-1">实例方法 <a class="header-anchor" href="#实例方法" aria-label="Permalink to “实例方法”">​</a></h2><h3 id="parse" tabindex="-1">parse() <a class="header-anchor" href="#parse" aria-label="Permalink to “parse()”">​</a></h3><p>解析 EPUB 文件并返回 EpubBook 对象。</p><p><strong>返回值:</strong></p><ul><li><code>EpubBook</code>: 解析后的 EPUB 书籍对象</li></ul><p><strong>异常:</strong></p><ul><li><code>BaseEpubException</code>: 解析过程中发生的异常</li><li><code>IOException</code>: I/O 操作失败</li><li><code>EpubPathValidationException</code>: 路径验证失败</li></ul><h3 id="parsemetadata" tabindex="-1">parseMetadata() <a class="header-anchor" href="#parsemetadata" aria-label="Permalink to “parseMetadata()”">​</a></h3><p>仅解析 EPUB 文件的元数据。</p><p><strong>返回值:</strong></p><ul><li><code>Metadata</code>: EPUB 元数据</li></ul><p><strong>异常:</strong></p><ul><li><code>BaseEpubException</code>: 解析过程中发生的异常</li><li><code>IOException</code>: I/O 操作失败</li><li><code>EpubPathValidationException</code>: 路径验证失败</li></ul><h3 id="parsetableofcontents" tabindex="-1">parseTableOfContents() <a class="header-anchor" href="#parsetableofcontents" aria-label="Permalink to “parseTableOfContents()”">​</a></h3><p>仅解析 EPUB 文件的目录结构。</p><p><strong>返回值:</strong></p><ul><li><code>List&lt;EpubChapter&gt;</code>: 章节列表</li></ul><p><strong>异常:</strong></p><ul><li><code>BaseEpubException</code>: 解析过程中发生的异常</li><li><code>IOException</code>: I/O 操作失败</li><li><code>EpubPathValidationException</code>: 路径验证失败</li></ul><h3 id="streamchapters-biconsumer-lt-epubchapter-inputstream-gt-processor" tabindex="-1">streamChapters(BiConsumer&lt;EpubChapter, InputStream&gt; processor) <a class="header-anchor" href="#streamchapters-biconsumer-lt-epubchapter-inputstream-gt-processor" aria-label="Permalink to “streamChapters(BiConsumer&amp;lt;EpubChapter, InputStream&amp;gt; processor)”">​</a></h3><p>流式处理章节内容，不将整个内容加载到内存中。</p><p><strong>参数:</strong></p><ul><li><code>processor</code>: 处理每个章节和其内容流的消费者函数</li></ul><p><strong>异常:</strong></p><ul><li><code>BaseEpubException</code>: 处理过程中发生的异常</li><li><code>IOException</code>: I/O 操作失败</li><li><code>EpubPathValidationException</code>: 路径验证失败</li></ul><h3 id="streamchapter-string-chapterid-consumer-lt-inputstream-gt-processor" tabindex="-1">streamChapter(String chapterId, Consumer&lt;InputStream&gt; processor) <a class="header-anchor" href="#streamchapter-string-chapterid-consumer-lt-inputstream-gt-processor" aria-label="Permalink to “streamChapter(String chapterId, Consumer&amp;lt;InputStream&amp;gt; processor)”">​</a></h3><p>流式处理特定章节的内容。</p><p><strong>参数:</strong></p><ul><li><code>chapterId</code>: 要处理的章节 ID</li><li><code>processor</code>: 处理章节内容流的消费者函数</li></ul><p><strong>异常:</strong></p><ul><li><code>BaseEpubException</code>: 处理过程中发生的异常</li><li><code>EpubPathValidationException</code>: 路径验证失败</li><li><code>IOException</code>: I/O 操作失败</li></ul><h3 id="processresources-function-lt-epubresource-void-gt-processor" tabindex="-1">processResources(Function&lt;EpubResource, Void&gt; processor) <a class="header-anchor" href="#processresources-function-lt-epubresource-void-gt-processor" aria-label="Permalink to “processResources(Function&amp;lt;EpubResource, Void&amp;gt; processor)”">​</a></h3><p>处理所有资源文件。</p><p><strong>参数:</strong></p><ul><li><code>processor</code>: 处理每个资源的函数</li></ul><p><strong>异常:</strong></p><ul><li><code>BaseEpubException</code>: 处理过程中发生的异常</li><li><code>IOException</code>: I/O 操作失败</li><li><code>EpubPathValidationException</code>: 路径验证失败</li></ul><h3 id="getresource-string-resourceid" tabindex="-1">getResource(String resourceId) <a class="header-anchor" href="#getresource-string-resourceid" aria-label="Permalink to “getResource(String resourceId)”">​</a></h3><p>根据资源 ID 获取特定资源。</p><p><strong>参数:</strong></p><ul><li><code>resourceId</code>: 资源 ID</li></ul><p><strong>返回值:</strong></p><ul><li><code>EpubResource</code>: 资源对象，如果未找到则返回 null</li></ul><p><strong>异常:</strong></p><ul><li><code>BaseEpubException</code>: 解析过程中发生的异常</li><li><code>IOException</code>: I/O 操作失败</li><li><code>EpubPathValidationException</code>: 路径验证失败</li></ul><h3 id="getcover" tabindex="-1">getCover() <a class="header-anchor" href="#getcover" aria-label="Permalink to “getCover()”">​</a></h3><p>获取 EPUB 文件的封面资源。</p><p><strong>返回值:</strong></p><ul><li><code>EpubResource</code>: 封面资源，如果未找到则返回 null</li></ul><p><strong>异常:</strong></p><ul><li><code>BaseEpubException</code>: 解析过程中发生的异常</li><li><code>IOException</code>: I/O 操作失败</li><li><code>EpubPathValidationException</code>: 路径验证失败</li></ul><h3 id="isvalid" tabindex="-1">isValid() <a class="header-anchor" href="#isvalid" aria-label="Permalink to “isValid()”">​</a></h3><p>检查 EPUB 文件是否有效。</p><p><strong>返回值:</strong></p><ul><li><code>boolean</code>: 如果文件有效返回 true，否则返回 false</li></ul><h3 id="getinfo" tabindex="-1">getInfo() <a class="header-anchor" href="#getinfo" aria-label="Permalink to “getInfo()”">​</a></h3><p>获取 EPUB 文件的基本信息，无需完整解析。</p><p><strong>返回值:</strong></p><ul><li><code>EpubInfo</code>: EPUB 文件的基本信息</li></ul><p><strong>异常:</strong></p><ul><li><code>BaseEpubException</code>: 解析过程中发生的异常</li><li><code>IOException</code>: I/O 操作失败</li><li><code>EpubPathValidationException</code>: 路径验证失败</li></ul><h2 id="内部类" tabindex="-1">内部类 <a class="header-anchor" href="#内部类" aria-label="Permalink to “内部类”">​</a></h2><h3 id="epubinfo" tabindex="-1">EpubInfo <a class="header-anchor" href="#epubinfo" aria-label="Permalink to “EpubInfo”">​</a></h3><p>EPUB 文件的基本信息类。</p><h4 id="构造方法-1" tabindex="-1">构造方法 <a class="header-anchor" href="#构造方法-1" aria-label="Permalink to “构造方法”">​</a></h4><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EpubInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String title, String author, String language, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chapterCount, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileSize)</span></span></code></pre></div><h4 id="方法" tabindex="-1">方法 <a class="header-anchor" href="#方法" aria-label="Permalink to “方法”">​</a></h4><ul><li><code>getTitle()</code>: 获取标题</li><li><code>getAuthor()</code>: 获取作者</li><li><code>getLanguage()</code>: 获取语言</li><li><code>getChapterCount()</code>: 获取章节数量</li><li><code>getFileSize()</code>: 获取文件大小</li><li><code>toString()</code>: 返回格式化的字符串表示</li></ul><h2 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to “使用示例”">​</a></h2><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 基本使用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EpubBook book </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EpubReader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fromFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;book.epub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用自定义配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EpubReaderConfig config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EpubReaderConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withLazyLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withParallelProcessing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EpubBook book </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EpubReader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fromFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;book.epub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), config).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 流式处理章节</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EpubReader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fromFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;book.epub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">streamChapters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((chapter, inputStream) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;处理章节: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chapter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTitle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 处理内容流</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取基本信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EpubReader.EpubInfo info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EpubReader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fromFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;book.epub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info);</span></span></code></pre></div>`,101)])])}const E=s(t,[["render",n]]);export{c as __pageData,E as default};
