import{_ as i,c as e,o as a,ah as l}from"./chunks/framework.BEBVyHNm.js";const u=JSON.parse('{"title":"AsyncEpubProcessor","description":"","frontmatter":{},"headers":[],"relativePath":"api/async-processor.md","filePath":"api/async-processor.md"}'),t={name:"api/async-processor.md"};function n(p,s,r,o,h,k){return a(),e("div",null,[...s[0]||(s[0]=[l(`<h1 id="asyncepubprocessor" tabindex="-1">AsyncEpubProcessor <a class="header-anchor" href="#asyncepubprocessor" aria-label="Permalink to “AsyncEpubProcessor”">​</a></h1><p><code>AsyncEpubProcessor</code> 是 EPUBime 库中的异步处理器，提供非阻塞的 EPUB 处理操作。该类允许用户在后台线程中执行各种 EPUB 解析和处理任务，避免阻塞主线程。</p><h2 id="类定义" tabindex="-1">类定义 <a class="header-anchor" href="#类定义" aria-label="Permalink to “类定义”">​</a></h2><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AsyncEpubProcessor</span></span></code></pre></div><h2 id="构造方法" tabindex="-1">构造方法 <a class="header-anchor" href="#构造方法" aria-label="Permalink to “构造方法”">​</a></h2><h3 id="asyncepubprocessor-1" tabindex="-1">AsyncEpubProcessor() <a class="header-anchor" href="#asyncepubprocessor-1" aria-label="Permalink to “AsyncEpubProcessor()”">​</a></h3><p>使用默认执行器（缓存线程池）创建异步处理器。</p><h3 id="asyncepubprocessor-executor-executor" tabindex="-1">AsyncEpubProcessor(Executor executor) <a class="header-anchor" href="#asyncepubprocessor-executor-executor" aria-label="Permalink to “AsyncEpubProcessor(Executor executor)”">​</a></h3><p>使用自定义执行器创建异步处理器。</p><p><strong>参数:</strong></p><ul><li><code>executor</code>: 用于异步操作的执行器</li></ul><h2 id="方法" tabindex="-1">方法 <a class="header-anchor" href="#方法" aria-label="Permalink to “方法”">​</a></h2><h3 id="parsebookasync-file-epubfile" tabindex="-1">parseBookAsync(File epubFile) <a class="header-anchor" href="#parsebookasync-file-epubfile" aria-label="Permalink to “parseBookAsync(File epubFile)”">​</a></h3><p>异步解析 EPUB 文件。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: 要解析的 EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;EpubBook&gt;</code>: 包含解析后 EpubBook 的 CompletableFuture</li></ul><h3 id="parsebookasync-file-epubfile-boolean-usecache-boolean-lazyloading" tabindex="-1">parseBookAsync(File epubFile, boolean useCache, boolean lazyLoading) <a class="header-anchor" href="#parsebookasync-file-epubfile-boolean-usecache-boolean-lazyloading" aria-label="Permalink to “parseBookAsync(File epubFile, boolean useCache, boolean lazyLoading)”">​</a></h3><p>异步解析 EPUB 文件，指定缓存和延迟加载选项。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: 要解析的 EPUB 文件</li><li><code>useCache</code>: 是否使用缓存</li><li><code>lazyLoading</code>: 是否使用延迟加载</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;EpubBook&gt;</code>: 包含解析后 EpubBook 的 CompletableFuture</li></ul><h3 id="parsemetadataasync-file-epubfile" tabindex="-1">parseMetadataAsync(File epubFile) <a class="header-anchor" href="#parsemetadataasync-file-epubfile" aria-label="Permalink to “parseMetadataAsync(File epubFile)”">​</a></h3><p>异步解析 EPUB 文件的元数据。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: 要解析的 EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;Metadata&gt;</code>: 包含元数据的 CompletableFuture</li></ul><h3 id="parsetableofcontentsasync-file-epubfile" tabindex="-1">parseTableOfContentsAsync(File epubFile) <a class="header-anchor" href="#parsetableofcontentsasync-file-epubfile" aria-label="Permalink to “parseTableOfContentsAsync(File epubFile)”">​</a></h3><p>异步解析 EPUB 文件的目录。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: 要解析的 EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;List&lt;EpubChapter&gt;&gt;</code>: 包含章节列表的 CompletableFuture</li></ul><h3 id="getbookinfoasync-file-epubfile" tabindex="-1">getBookInfoAsync(File epubFile) <a class="header-anchor" href="#getbookinfoasync-file-epubfile" aria-label="Permalink to “getBookInfoAsync(File epubFile)”">​</a></h3><p>异步获取 EPUB 文件的基本信息。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: 要分析的 EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;EpubReader.EpubInfo&gt;</code>: 包含基本 EPUB 信息的 CompletableFuture</li></ul><h3 id="processchaptersasync-file-epubfile-biconsumer-lt-epubchapter-inputstream-gt-processor" tabindex="-1">processChaptersAsync(File epubFile, BiConsumer&lt;EpubChapter, InputStream&gt; processor) <a class="header-anchor" href="#processchaptersasync-file-epubfile-biconsumer-lt-epubchapter-inputstream-gt-processor" aria-label="Permalink to “processChaptersAsync(File epubFile, BiConsumer&amp;lt;EpubChapter, InputStream&amp;gt; processor)”">​</a></h3><p>使用流处理异步处理章节。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: 要处理的 EPUB 文件</li><li><code>processor</code>: 处理每个章节的处理器</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;Void&gt;</code>: 在所有章节处理完成时完成的 CompletableFuture</li></ul><h3 id="processchapterasync-file-epubfile-string-chapterid-consumer-lt-inputstream-gt-processor" tabindex="-1">processChapterAsync(File epubFile, String chapterId, Consumer&lt;InputStream&gt; processor) <a class="header-anchor" href="#processchapterasync-file-epubfile-string-chapterid-consumer-lt-inputstream-gt-processor" aria-label="Permalink to “processChapterAsync(File epubFile, String chapterId, Consumer&amp;lt;InputStream&amp;gt; processor)”">​</a></h3><p>异步处理特定章节。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: EPUB 文件</li><li><code>chapterId</code>: 要处理的章节 ID</li><li><code>processor</code>: 处理章节内容的处理器</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;Void&gt;</code>: 在章节处理完成时完成的 CompletableFuture</li></ul><h3 id="processresourcesasync-file-epubfile-function-lt-epubresource-void-gt-processor" tabindex="-1">processResourcesAsync(File epubFile, Function&lt;EpubResource, Void&gt; processor) <a class="header-anchor" href="#processresourcesasync-file-epubfile-function-lt-epubresource-void-gt-processor" aria-label="Permalink to “processResourcesAsync(File epubFile, Function&amp;lt;EpubResource, Void&amp;gt; processor)”">​</a></h3><p>异步处理所有资源。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: EPUB 文件</li><li><code>processor</code>: 处理每个资源的函数</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;Void&gt;</code>: 在处理完成时完成的 CompletableFuture</li></ul><h3 id="getcoverasync-file-epubfile" tabindex="-1">getCoverAsync(File epubFile) <a class="header-anchor" href="#getcoverasync-file-epubfile" aria-label="Permalink to “getCoverAsync(File epubFile)”">​</a></h3><p>异步获取封面资源。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;EpubResource&gt;</code>: 包含封面资源的 CompletableFuture，如果未找到则为 null</li></ul><h3 id="getresourceasync-file-epubfile-string-resourceid" tabindex="-1">getResourceAsync(File epubFile, String resourceId) <a class="header-anchor" href="#getresourceasync-file-epubfile-string-resourceid" aria-label="Permalink to “getResourceAsync(File epubFile, String resourceId)”">​</a></h3><p>异步获取特定资源。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: EPUB 文件</li><li><code>resourceId</code>: 资源 ID</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;EpubResource&gt;</code>: 包含资源的 CompletableFuture，如果未找到则为 null</li></ul><h3 id="validateasync-file-epubfile" tabindex="-1">validateAsync(File epubFile) <a class="header-anchor" href="#validateasync-file-epubfile" aria-label="Permalink to “validateAsync(File epubFile)”">​</a></h3><p>异步验证 EPUB 文件。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: 要验证的 EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;Boolean&gt;</code>: 包含验证结果的 CompletableFuture</li></ul><h3 id="loadenhancedbookasync-file-epubfile" tabindex="-1">loadEnhancedBookAsync(File epubFile) <a class="header-anchor" href="#loadenhancedbookasync-file-epubfile" aria-label="Permalink to “loadEnhancedBookAsync(File epubFile)”">​</a></h3><p>异步加载增强的书籍对象。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;EpubBookEnhanced&gt;</code>: 包含增强书籍对象的 CompletableFuture</li></ul><h3 id="loadenhancedmetadataasync-file-epubfile" tabindex="-1">loadEnhancedMetadataAsync(File epubFile) <a class="header-anchor" href="#loadenhancedmetadataasync-file-epubfile" aria-label="Permalink to “loadEnhancedMetadataAsync(File epubFile)”">​</a></h3><p>异步加载增强的元数据。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;MetadataEnhanced&gt;</code>: 包含增强元数据的 CompletableFuture</li></ul><h3 id="processmultiplebooksasync-list-lt-file-gt-epubfiles-function-lt-epubbook-epubbook-gt-processor" tabindex="-1">processMultipleBooksAsync(List&lt;File&gt; epubFiles, Function&lt;EpubBook, EpubBook&gt; processor) <a class="header-anchor" href="#processmultiplebooksasync-list-lt-file-gt-epubfiles-function-lt-epubbook-epubbook-gt-processor" aria-label="Permalink to “processMultipleBooksAsync(List&amp;lt;File&amp;gt; epubFiles, Function&amp;lt;EpubBook, EpubBook&amp;gt; processor)”">​</a></h3><p>并行处理多个 EPUB 文件。</p><p><strong>参数:</strong></p><ul><li><code>epubFiles</code>: 要处理的 EPUB 文件列表</li><li><code>processor</code>: 处理每个书籍的函数</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;List&lt;EpubBook&gt;&gt;</code>: 包含处理后书籍列表的 CompletableFuture</li></ul><h3 id="getchaptercountasync-file-epubfile" tabindex="-1">getChapterCountAsync(File epubFile) <a class="header-anchor" href="#getchaptercountasync-file-epubfile" aria-label="Permalink to “getChapterCountAsync(File epubFile)”">​</a></h3><p>异步获取章节数量。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;Integer&gt;</code>: 包含章节数量的 CompletableFuture</li></ul><h3 id="getresourcecountasync-file-epubfile" tabindex="-1">getResourceCountAsync(File epubFile) <a class="header-anchor" href="#getresourcecountasync-file-epubfile" aria-label="Permalink to “getResourceCountAsync(File epubFile)”">​</a></h3><p>异步获取资源数量。</p><p><strong>参数:</strong></p><ul><li><code>epubFile</code>: EPUB 文件</li></ul><p><strong>返回值:</strong></p><ul><li><code>CompletableFuture&lt;Integer&gt;</code>: 包含资源数量的 CompletableFuture</li></ul><h3 id="shutdown" tabindex="-1">shutdown() <a class="header-anchor" href="#shutdown" aria-label="Permalink to “shutdown()”">​</a></h3><p>关闭处理器并释放资源。</p><h2 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to “使用示例”">​</a></h2><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建异步处理器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AsyncEpubProcessor processor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AsyncEpubProcessor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 异步解析书籍</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CompletableFuture&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EpubBook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; futureBook </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseBookAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;book.epub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">futureBook.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">thenAccept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(book </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;解析完成: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> book.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTitle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exceptionally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(throwable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.err.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;解析失败: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> throwable.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 异步获取封面</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CompletableFuture&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EpubResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; futureCover </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCoverAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;book.epub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">futureCover.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">thenAccept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cover </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (cover </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;找到封面: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cover.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getHref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 异步处理多个书籍</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; epubFiles </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Arrays.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">asList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;book1.epub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;book2.epub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CompletableFuture&lt;List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EpubBook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; futureBooks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">processMultipleBooksAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(epubFiles, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    book </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 对每本书进行处理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> book;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">futureBooks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">thenAccept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(books </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;处理完成 &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> books.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; 本书&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用完毕后关闭处理器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">processor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to “注意事项”">​</a></h2><ul><li>使用异步处理器时，应确保在应用结束前关闭处理器以释放线程资源。</li><li>异步操作的结果通过 CompletableFuture 提供，可以使用 thenAccept、thenApply 等方法进行后续处理。</li><li>对于需要长时间运行的异步操作，建议使用适当的线程池配置。</li></ul>`,114)])])}const d=i(t,[["render",n]]);export{u as __pageData,d as default};
